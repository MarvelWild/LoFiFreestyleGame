				+on first activation
			+query from server
		+define placeable items
			+seed should have sprite
		+draw active item
			+some entities could listen for keys
		+enable/disable by F11

			entity react to mouse click
		>place by rclick
	editor mode
put seed into world
	+list_players_response - empty
	+сбросились коорд
+persist server
		+если игрок уже находится на уровне - не добавлять его повторно
	+если клиент падает то при повторном входе он ложит сервер
	+login into title
	
		+шлём уведомление всем кроме входящего
	+при входе второго игрока первый это не видит
+dual player test

+выход из игры при логоффе

+при втором логоффе сервер пытался удалить игрока с ид 1 хотя был создан с ид 2

	+если нету первого - команда на создать как раньше
	+логинимся первым из списка
	+сервером отдаём игрока
	+запрашиваем список
+нужно на логине заходить тем же игроком с ид=1
				
				+dont skip it on client
				+by removing from local state
			+handle entity_removed
				+make sure it sent
				+log all received
			+receive entity_removed on client
			+introduce event target type 'level'
		notify everyone on this level
		+remove player
			+do logoff on receive
		+send logoff ok event
	+handle logoff on server
	+send logoff event
+remove leaving player

+qol: clean start mode
	
	+draw upgraded
	+property defined
+entity draw layer property
	
	+make sure drawUi is called
	+add it to local entities
	+declare ui entity	
		reference: gen1, ui was fine. ok to paste
		then it managed by POW
		it has drawUi function
		ui component is local entity (service in current terms)
	ui fundamentals
hotbar ui











































client send walk intention to server
	server respond with walk command to all


+move camera to POW
+console custom title - bug with new lines
+упрощение до мгновенной обработки событий
+теперь каждое событие нужно вызывать process
+create_player_response send from server
+afterPlayerCreated react on client
+server response to game_start
	send game state+
		make first level 'start'+
			bg prop+
			objects list later+
	+send player state
	
+process full_state event on client	
	receive+
	+apply level
		+background
	+apply player position
zerobrane mod: custom bg pattern for files (know when you in lib/framework/game	



































session 2019-03-15
	events: use queue
		use deque as internal storage
		+pow: attach queue lib
			Pow.deque
				C:\Gamedev\Love\LoFiFreestyleGame\generation2\client\shared\lib\powlov\deps\cw-lua\deque\deque.lua
	
	


client respond to create_player
	вызов create_player_response
		\client\shared\lib\powlov\module\net\client.lua
			тут обрабатываеть wip single handler
			wip handleEvents
		сейчас 
error:net msg not processed:{
cmd="events_client",
events={
        [1]={
                player={
                        entity="player",
                        name="mw",
                        id=4
                },
                target="login",
                code="create_player_response",
                id=4,
                entity="Event",
                targetLogin="c1"
        }
}
}#^#		






server sends create_player_response to client:
	should happens in wip
	 error:event unprocessed:{
	player={
					entity="player",
					name="mw",
					id=2
	},
	target="login",
	code="create_player_response",
	id=2,
	entity="Event",
	targetLogin="c1"
	}
	stack traceback:
					shared/lib/powlov/deps/debug.lua:50: in function 'log'
					shared/lib/powlov/module/net/event.lua:142: in function 'doProcessEvent'
					shared/lib/powlov/module/net/event.lua:155: in function 'processEvent'
					shared/lib/powlov/module/net/event.lua:162: in function 'update'
					shared/lib/powlov/pow.lua:214: in function 'update'
					main.lua:29: in function 'update'
					[string "boot.lua"]:509: in function <[string "boot.lua"]:493>
					[C]: in function 'xpcall'
					[strin



+no id for services

server:

на обдумывание:
	некоторые обработчики нужны только в ответ на что-то.
	вешать их динамически и когда не нужны - снимать
	


	+108179  error:event unprocessed:{
	target="server",
	code="create_player",
	id=12,
	entity="Event",
	player_name="mw",
	login="c1"
	}
	stack traceback:
					shared/lib/powlov/deps/debug.lua:50: in function 'log'
					shared/lib/powlov/module/net/event.lua:141: in function 'doProcessEvent'
					shared/lib/powlov/module/net/event.lua:154: in function 'processEvent'
					shared/lib/powlov/module/net/event.lua:161: in function 'update'
					shared/lib/powlov/pow.lua:214: in function 'update'
					main.lua:22: in function 'update'
					[string "boot.lua"]:509: in function <[string "boot.lua"]:493>
					[C]: in function 'xpcall'
					[string "boot.lua"]:657: in function <[string "boot.lua"]:630>

+client: event without code




	
				+think those handlers generic way - later
			+it wont. implement single response handler on client
		+test afterLogin hit
	+on successfull login send request
	
	
	
	
	
	

	server reacts to create_player
client joins world p2

					+respond login_ok with login
				+должно заполниться после 
				+event.login=_netState.login не заполнено
				+событие без логина
			+shouldSendEventFromClient:1 t:server c:create_player targetLogin:nil result:false - it  should
			+пусть сервер и клиент это делают
		+что должно отправить событие? хранятся в pow.net.event
	+send create event  to server
		+create_player
	+create event for server
+client joins world p1


	+test receive
+client ack of login success	
+server responds to login command with 
+client connects



multipart entity (s+c+sha)

+Server start listening

	+pick net lib
		grease - picked
			pro
				known
			con
				too lowlevel, need boilerplate code/midware
					but could be good experience, no extra/unused code
					and better understanding
			
		noobhub - rejected
			pro
				noivelty
				can save time
			con
				js, not lua!
				
enforce strict later
				
				
plugin architecture
	api
		game itself as api? seems fine
		or short set of methods?



visions

	event lifecycle
		process
		send
		clean


conclusions
		но у него есть таргет, что круто
	event по сути та же команда, но отправляемая в конце хода - есть время обработать их




Concept
	private
	protected
	mystery
	rethink everything, totally new iteration